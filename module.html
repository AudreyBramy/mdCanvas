<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
  	<meta charset="utf-8">

	<title>Grid / mdCanvas</title>
	<link rel="stylesheet" href="module.css">
	<!-- @todo local einbindne -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<script src="js/systemjs/dist/system.js"></script>
	<!-- @todo how to get this script line in SystemJS.import()? -->
  	<script src="https://cdn.rawgit.com/showdownjs/showdown/1.4.2/dist/showdown.min.js"></script>
	<script>
		SystemJS.import('https://code.jquery.com/jquery.js');
  		/* SystemJS.import('https://cdn.rawgit.com/showdownjs/showdown/1.4.2/dist/showdown.min.js'); */ // @todo how to integrate this correctly and avoid the script tag?

		SystemJS.config({
		  map: {
			'plugin-babel': 'js/plugin-babel/plugin-babel.js',
			'systemjs-babel-build': 'js/plugin-babel/systemjs-babel-browser.js'
		  },
		  transpiler: 'plugin-babel'
		});

		SystemJS.import('./js/modules/mdCanvas.js').then( function( message ) { 
			console.log( new message.main(  ).say );
		} );
		SystemJS.import('./js/modules/sidebar.js').then( function( message ) { 
			console.log( new message.sidebar(  ).say );
		} );
	</script>
</head>
<body>
  <!-- @todo sidebar must be one whole column on the right side -->
  <div id="sidebar">
	  <button id="takephoto" class="sidebuttons">
	  	<i class="fa fa-camera" aria-hidden="true"></i>
	  </button>
	  <button id="toggler" class="sidebuttons">
	  	<i class="fa fa-bars" aria-hidden="true"></i>
	  </button>
  	  <!--a id="toggler" onclick=" ">&raquo;</a-->
	  <ul id="link" style="display:none"></ul>
  </div>
  <div id="canvasbox">
	  <h1 id="mdc-canvas"><div class="loader"></div><span style="padding-left:7px">Loading canvas</span></h1>
	  <p id="hypothesis">Hypothesis</p>
	  <div class="containerbox">
		  <div id="mdc-problem" class="box problem">Problem</div>
		  <div id="mdc-solution" class="box solution">Solution</div>
		  <div id="mdc-key-metrics" class="box key-metrics">Key metrics</div>
		  <div id="mdc-unique-value-proposition" class="box unique-value-proposition">Unique-value-proposition</div>
		  <div id="mdc-unfair-advantage" class="box unfair-advantage">Unfair advantage</div>
		  <div id="mdc-channels" class="box channels">Channels</div>
		  <div id="mdc-customer-segment" class="box customer-segment">Customer-segment</div>
		  <div id="mdc-cost-structure" class="box cost-structure">Cost-structure</div>
		  <div id="mdc-revenue-stream" class="box revenue-stream">Revenue-stream</div>
		  <div id="mdc-todo" class="box todo">Todo</div>
	  </div>
  </div>
  
  <!-- @todo load html2canvas with SzstemJS, create a button to take the screenshot, and save it somewhere for download or print -->
  <!-- @todo jquery is two time loaded, reduce this to one time -->
  <script src="https://code.jquery.com/jquery.js"></script>
  <script type="text/javascript" src="./js/html2canvas/html2canvas.js"></script>
  <script type="text/javascript">
	/* @todo open up png as print dialog, or save as pdf */
		$(document).on('click', '#takephoto', function() {
			//let canvasbox = document.getElementById("canvasbox");
			let canvasbox = $("#canvasbox");
			html2canvas(canvasbox).then(function(canvas) {
				let printWindow = window.open();
				//let img = canvas.toDataURL("image/png");
				let url = canvas.toDataURL();
				printWindow.document.write('<html><style type="text/css" media="print">button {display:none; }</style><body><img src="' + url + '" ><button onclick="window.print()" style="margin-right:100px">print</button><span>Powered by <a href="https://github.com/jerik/mdCanvas">mdCanvas</a></span></body></html>');
				//printWindow.document.body.appendChild(canvas);
			});
		});
  </script>
</body>
</html>
